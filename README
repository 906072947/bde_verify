BDE Verify - A Static Checker for C++

Bde_verify is a static analysis tool that verifies that source code adheres
to the BDE coding standards.

The online documentation for bde_verify can be found here:
    <http://bloomberg.github.io/bde_verify/bde_verify_build/html/>

Build Instructions
==================

Supported Platforms:
   o Linux x86
   o SunOS sparc
   o Windows

Prerequesites: 
   o llvm/clang 5.0 (see below for instructions)
   o gcc >= 5 (Linux and SunOS)
   o Visual Studio >= 2015 (Windows)
   o nsis with large-string overlay (Windows, more details below)
   o cmake >= 3.4.3
   o gnu make
   o aspell

Bde_verify incorporates llvm/clang-5.0 libraries.  These may already be
installed on the build machine.  If not, you will need to build llvm/clang
from source, as follows.

Installing LLVM/CLang Sources
=============================
Note: this requires a great deal of free disk space.

 # We will place LLVM/CLANG source code here
 export SRC=/path/to/source/directory
 mkdir -p $SRC

 # Clone the CLANG/LLVM repositories
 export GL=http://github.com/llvm-mirror
 git clone -b release_50 $GL/llvm.git  $SRC/llvm
 git clone -b release_50 $GL/clang.git $SRC/llvm/tools/clang
 git clone -b release_50 $GL/clang-tools-extra.git \
                                       $SRC/llvm/tools/clang/tools/extra

Building LLVM/CLANG on Linux and SunOS
======================================

 # We will build LLVM/CLANG here
 export BLD=/path/to/build/directory
 mkdir -p $BLD

 # We will install LLVM/CLANG here
 export INS=/path/to/install/directory
 mkdir -p $INS

 # Set up compiler to use
 export GCCDIR=/path/to/gcc/dir

 # Configure, build, and install
 cd $BLD
 cmake -DCMAKE_CXX_COMPILER=$GCCDIR/bin/g++ \
       -DCMAKE_C_COMPILER=$GCCDIR/bin/gcc \
       -DCMAKE_BUILD_TYPE=MinSizeRel \
       -DCMAKE_INSTALL_PREFIX=$INS \
       -DLLVM_LIBDIR_SUFFIX=64 \
       -DLLVM_TARGETS_TO_BUILD='Sparc;X86' \
       -DLLVM_ENABLE_TERMINFO=OFF \
       $SRC/llvm
 cmake --build . --target install --config MinSizeRel -- -j 20

Building LLVM/CLANG on Windows
==============================

 # Install the NSIS packaging system:
 #  We refer to version 3.02.1 here, but newer versions should work.
 #
 #  Navigate to <https://sourceforge.net/projects/nsis/files/NSIS%203/3.02.1/>
 #  The installer is named <nsis-3.02.1-setup.exe>.  Download and run it.
 #
 #  Download the large-strings overlay <nsis-3.02.1-strlen_8192.zip>.
 #  Open that archive and extract its files on top of the installed ones.

 # We will build LLVM/CLANG here
 export BLD=/path/to/build/directory
 mkdir -p $BLD

 # Configure and build
 cd $BLD
 cmake $SRC/llvm
 cmake --build . --target package --config MinSizeRel

 # The result is an executable named LLVM-5.{...}-win32.exe
 # Run it to install LLVM/CLang.  When asked, set the path for all users.

Installing bde_verify Sources
=============================

 # We will place bde_verify source code here
 export BVSRC=/path/to/bde_verify/source/directory
 mkdir -p $SRC

Building bde_verify on Linux and SunOS
======================================
Note: The build is done in-place in the source directory

 # We will install bde_verify here
 export BVINS=/path/to/bde_verify/install/directory
 mkdir -p $BVINS

 # Set up compiler to use
 export GCCDIR=/path/to/gcc/dir

 # Build and install bde_verify
 CXX=$GCCDIR/bin/g++ \
 LLVMDIR=/path/to/installed/llvm-clang \
 DESTDIR=$BVINS \
 make -C $BVSRC -j 20 install

 # Test the build if you like
 CXX=$(GCCDIR)/bin/g++ \
 LLVMDIR=/path/to/installed/llvm-clang \
 DESTDIR=$BVINS \
 make -C $BVSRC -k check

 # The installed bde_verify script will be found at
 # $BVINS/bin/bde_verify

Building bde_verify on Windows
==============================

 # We will build bde_verify here
 export BVBLD=/path/to/bde_verify/build/directory

 cd $BVBLD
 cmake $BVINS
 cmake --build . --target package --config MinSizeRel

 # The result is an executable named bde_verify-{...}-win32.exe
 # Run it to install bde_verify.  When asked, set the path for all users.

 # Now build the Visual Studio bde_verify add-in
 # Open $BVSRC/Windows/BDE_VERIFY_VS/BDE_VERIFY_VS.sln in Visual Studio.
 # Build the solution.  The result is
 # $BVSRC/Windows/BDE_VERIFY_VS/BDE_VERIFY_VS/bin/Release/BDE_VERIFY_VS.vsix
 # Running that file installs the extension into Visual Studio.
